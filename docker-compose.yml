version: '3.5'

services:
  hue:
      build:
          context: ./hue
          dockerfile: Dockerfile
      dns: 8.8.8.8
      ports:
          - "8888:8888"
      volumes:
          - ./hue/hue.ini:/usr/share/hue/desktop/conf/z-hue.ini
      depends_on:
          - "database"
  database:
      image: mysql:5.7
      ports:
          - "3306:3306"
      command: --init-file /data/application/init.sql
      volumes:
          - data:/var/lib/mysql
          - ./init.sql:/data/application/init.sql
      environment:
          MYSQL_ROOT_USER: root
          MYSQL_ROOT_PASSWORD: secret
          MYSQL_DATABASE: hue
          MYSQL_USER: root
          MYSQL_PASSWORD: secret
  drill:
      image: drill/apache-drill:latest
      stdin_open: true
      tty: true
      ports:
          - "8047:8047"
      volumes:
          - ./data:/data
  superset:
      build:
          context: ./superset
      ports:
          - "8088:8088"
volumes:
  data: